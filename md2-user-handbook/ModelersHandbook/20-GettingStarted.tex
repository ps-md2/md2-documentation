% !TEX root = ../md2-user-handbook.tex
% !TeX spellcheck = en_US
% !TeX program = xelatex


\subsection{Developing a Single App} 
\label{subsec:SingleAppDev}
This section describes how an application can be developed based on the current (March 2015) state of the \MD DSL. To this end, it is structured according to the different layers that constitute a \MD model, which are shown in Figure \ref{fig:MD2Arch}. Aside from the conventional MVC layers -- model, view and controller -- the architecture includes an additional layer which enables the modelling as well as the generation of workflows within and across apps.

%\begin{figure}[htb!]
%\centering
%\includegraphics[width = 0.4\linewidth]{Fig/MD2Arch.png}
%\caption{Architecture of \MD Models}
%\label{fig:MD2Arch}
%\end{figure}

\begin{figure}[htb!]
\centering
\begin{tikzpicture}[redbox/.style = {rectangle, fill=ercisred, text =white, text width=5em, minimum height = 3em, text centered, drop shadow}, >=stealth]
	\node[redbox] (wf) {Workflow};
	\node[redbox, below = of wf] (ctrl) {Controller};
	\node[redbox, below left = of ctrl] (model) {Model};
	\node[redbox, below right = of ctrl] (view) {View};
	\draw[->, thick, ercisred] (wf) -- (ctrl);
	\draw[->, thick, ercisred] (ctrl) -| (model);
	\draw[->, thick, ercisred] (ctrl) -| (view);
	\draw[gray!50!ercisred, thick, dashed] ($ (wf.south west) + (-1.5cm,-0.5cm) $) -- ($ (wf.south east) + (1.5, -0.5cm) $);
\end{tikzpicture}
\caption{Architecture of \MD Models}
\label{fig:MD2Arch}
\end{figure}

All components in \MD are organized in a package structure that represents the aforementioned structure. All documents have to be placed in corresponding packages (views, models, controllers or workflow). For example, all view files are expected to be in the package any.project.package.views. The package has to be defined in each \MD file as follows:
\begin{lstlisting}
package PACKAGE_NAME
\end{lstlisting}
The package name has to be a fully qualified name that reflects the actual folder structure.

\subsubsection{Workflow} 
\label{subsubsec:Workflow}
\input{ModelersHandbook/workflow}

\subsubsection{Model} 
\label{subsubsec:Model}
\input{ModelersHandbook/model}

\subsubsection{View} 
\label{subsubsec:View}
\input{ModelersHandbook/view}

\subsubsection{Controller} 
\label{subsubsec:Controller}
\input{ModelersHandbook/controller}


\subsection{Deploying a Single App}
\label{subsec:SingleAppDep}

\subsubsection{Backend} 
\label{subsubsec:Backend}
\todo{empty @JAN @TOBI}

\subsubsection{map.apps} 
\label{subsubsec:mapapps}
\todo{empty @ALL}
