% !TEX TS-program = XeLaTeX
% !TeX spellcheck = en_US
% !TeX program = xelatex


\documentclass[a4paper, 12pt, titlepage, headsepline, listof = totoc, bibliography = totoc, numbers = noenddot]{scrbook} %
\usepackage[left = 2cm, right = 2cm, top = 3cm, bottom = 3cm]{geometry} % spaces on the sides of the paper
%\usepackage[utf8]{inputenc} %pdflatex
\usepackage{polyglossia} %xelatex
\setdefaultlanguage[variant=british]{english} %xelatex

% fonts and layout (xelatex)
%\defaultfontfeatures{Mapping=tex-text}
\setmainfont[Mapping=tex-text]{Adobe Garamond}
\setsansfont[Mapping=tex-text]{Meta}
\setmonofont{Source Code Pro}
\linespread{1.3}
\frenchspacing
\usepackage{setspace}
\usepackage{microtype}
\usepackage{xspace}
\usepackage{enumitem}
\raggedbottom
\setlist[itemize]{noitemsep, topsep=0pt}

% Graphics, subfigures, and colours
\usepackage{graphicx}
\usepackage[bf,IT]{subfigure}% http://ctan.org/pkg/subfigure
\usepackage{tikz}
\usetikzlibrary{calc,positioning,shadows,arrows,shapes}
%\usetikzlibrary{calc,fit,shapes,shapes.callouts,shapes.symbols,positioning,shadows,arrows,decorations,backgrounds,plotmarks,external}
%\tikzexternalize[prefix=tikz/]

% Listings
\usepackage{listings}

\lstdefinelanguage{MD2}{
  morekeywords={WorkflowElement,WorkflowElements, fires, start, App, startable, appName, package, entity, string,
  date, float, enum, integer, boolean, time, datetime, GridLayoutPane, FlowLayoutPane, TabbedPane, TextInput,
  label, tooltip, type, default, timestamp, OptionInput, options, CheckBox, checked, Label, text, style, Tooltip,
  Button, Image, height, width, src, Spacer, AutoGenerator, exclude, only, textProposition, contentProvider,
  ContentProvider, EntitySelector, color, fontSize, textStyle, main, appVersion, modelVersion, workflowManager,
  defaultConnection, CustomAction, CombinedAction, CustomCodeFragement, SimpleAction, WebServiceCallAction, WebServiceCall, externalWebService, url, method, GET, POST, PUT, DELETE, queryparams, bodyparams, on, from, Container, Content,
  GlobalEventType, OnConditionEvent, elementEventType, GotoViewAction, Workflow, WorkflowStep, ContentProvider, use,
  for, to, latitude, longitude, altitude, citystreet, number, postalCode, country, province, ElementEventType, event,
  valid, empty, filled, and, equals, not, is, or, Condition, Boolean, bind, unbind, Validator, ContainerElement,
  ContentElement, validator, IsIntValidator, NotNullValidator, IsNumberValidator, IsDateValidator, RegExValidator,
  NumberRangeValidator, StringRangeValidator, map, unmap, call, actions, message, min, max, regEx, format, minLength,
  maxLength, RemoteValidator, connection, model, attributes, workflow, ProcessChainStep,step, view, forwardCondition,
  forwardMessage, backwardMessage, backwardCondition, forwardOnEvent, backwardOnEvent, forwardEvents, subProcessChain,
  remoteConnection, uri, ProcessChain, end, defaultProcessChain, onInit, FireEvent, ProcessChainProceed, ProcessChainReverse, ProcessChainGoto, SetProcessChain, GotoView, where, Location, Disable, Enable, DisplayMessage, ContentProviderOperation, ContentProviderReset, inputs, outputs, cityInput, streetInput, streetNumberInput, postalInput, countryInput,FileUpload, UploadedImageOutput, imgHeight,imgWidth,fileUploadConnection, storagePath, file, optional,
  latitudeOutput, longitudeOutput, name, description, proceed, reverse, goto, return, given, do, returnTo, disabled,
  action, if, else, set, elseif,
  invokable, at, using, as},
  otherkeywords={},
  sensitive=true,
  morecomment=[l]{//},
  morecomment=[n]{/*}{*/},
  morestring=[b]",
  morestring=[b]',
  morestring=[b]"""
}


\lstdefinelanguage{JavaScript}{
	keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
	keywordstyle=\color{blue}\bfseries,
	ndkeywords={class, export, boolean, throw, implements, import, this},
	ndkeywordstyle=\color{darkgray}\bfseries,
	identifierstyle=\color{black},
	sensitive=false,
	comment=[l]{//},
	morecomment=[s]{/*}{*/},
	commentstyle=\color{purple}\ttfamily,
	stringstyle=\color{brown}\ttfamily,
	morestring=[b]',
	morestring=[b]"
}

\definecolor{javastringblue}{rgb}{0.164,0,1} % for strings
\definecolor{javagreen}{rgb}{0.25,0.5,0.35} % comments
\definecolor{javapurple}{rgb}{0.5,0,0.35} % keywords
\definecolor{javadocblue}{rgb}{0.25,0.35,0.75} % javadoc

\lstdefinelanguage{Java}{
	keywordstyle=\color{javapurple}\bfseries,
	stringstyle=\color{javastringblue},
	commentstyle=\color{javagreen},
	morecomment=[s][\color{javadocblue}]{/**}{*/},
}
\lstdefinelanguage{Simple}{
}

%Set default language
\lstset{
	language=MD2,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\footnotesize\ttfamily},
	numbers=none,
	numberstyle=\tiny\color{gray},
	keywordstyle=\color{mauve},
	commentstyle=\color{dkgreen},
	stringstyle=\color{blue},
	breaklines=true,
	breakatwhitespace=true
	tabsize=3
}
%\usepackage{caption} 
\renewcommand{\thesubfigure}{\alph{subfigure}}% (a) -> a
%\usepackage[table]{xcolor}
\definecolor{Lightgray}{gray}{0.9}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{RGB}{127,0,85}

% Define ERCIS colors (see official corporate design manual)
\definecolor{ercisblack}{RGB}{0,0,0}
\definecolor{ercisgrey}{RGB}{94,94,93}
\definecolor{ercisred}{RGB}{133,35,57}
\definecolor{ercislightred}{RGB}{200,156,166}
\definecolor{ercisblue}{RGB}{135,151,163}
\definecolor{ercisclaim}{named}{ercislightred}

% Additional ERCIS colors
\definecolor{ercisdarkblue}{RGB}{67,92,139}
\definecolor{erciscyan}{RGB}{0,156,179}
\definecolor{ercisorange}{RGB}{231,124,18}
\definecolor{ercisgreen}{RGB}{135,191,42}

% Define WWU colors (see official Corporate Design manual, p. 21)
\definecolor{pantoneblack7}{RGB}{62,62,59}

%maths
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsmath}


%STOP ROMAN NUMBERS FROM GROWING TO THE RIGHT IN TAB OF FIGURES!!!!!!11
\makeatletter \def\@pnumwidth{3em}\makeatother 


% notes, reminder
\setlength{\marginparwidth}{1.5cm} % width of todo note
\usepackage[ngerman,textwidth=1\marginparwidth,textsize=scriptsize,backgroundcolor=yellow,linecolor=blue]{todonotes} %,disable
%\reversemarginpar % put todo note left, where the margin is (way) larger (disabled, since it's not)

%Acronyms
%\usepackage[printonlyused]{acronym}

%Quotations
\usepackage{csquotes}
\setquotestyle[american]{english}

% References Section
%\usepackage[backend=biber,maxbibnames=99,style=alphabetic,firstinits=true]{biblatex} %,uniquename=allfull
%\bibliography{lit.bib} % Which file to use for the bibliography?


% hyperlinks and references
\usepackage{hyperref}
\usepackage{cleveref}



% Table design
\usepackage{supertabular}
\usepackage{booktabs}
\usepackage{float}
\restylefloat{table}

% Clubs and Widows (Hurenkinder und Schusterjungen)
\clubpenalty = 10000 
\widowpenalty = 10000 
\displaywidowpenalty = 10000

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% design of the head of the report pages

\usepackage{scrpage2}
\clearscrheadings                 		% clears all predefined formats
\pagestyle{scrheadings}			% use this style only on the actual text
\ohead{}		% writes your name on each side in the upper right corner
\automark{section}                  
\ihead{\headmark}				% automatically writtes the section name in the upper left corner
\cfoot{\pagemark}				% page number on the bottom (center)


\newcommand{\MD}{MD$^2$\xspace}
\newcommand{\mapapps}{map.apps\xspace}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cover sheet

\title{User's Handbook}
\subtitle{map.apps with MD2}
\author{Project Seminar\\
Model-driven Mobile Development\\
(University of Münster)}
%\date{January 18, 2015}

% hyperref PDF metadata
\hypersetup{pdfinfo={
	Title={Handbook map.apps with MD2},
	Author={PS MD2 (University of Münster)}
}}


\begin{document}



\thispagestyle{empty}
%\maketitle
\begin{titlepage}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} % Defines a new command for the horizontal lines, change thickness here

\center % Center everything on the page
 
%-------------
%   LOGOS
%-------------

\begin{minipage}[b]{0.5\textwidth}
\begin{flushleft}
\includegraphics[width=0.9\textwidth]{Fig/wwu-logo-title}
\end{flushleft}
\end{minipage}
~
\begin{minipage}[b]{0.4\textwidth}
\begin{flushright}
\includegraphics[width=0.4\textwidth]{Fig/md2-logo}
\end{flushright}
\end{minipage}\\[1.5cm] 
 
 
 
%----------------------------------------------------------------------------------------
%	HEADING SECTIONS
%----------------------------------------------------------------------------------------

\textsc{\LARGE Project Seminar\\ Model-driven Mobile Development}\\[1.5cm] % Name of your university/college
%\textsc{\Large Major Heading}\\[0.5cm] % Major heading such as course name
%\textsc{\large Minor Heading}\\[0.5cm] % Minor heading such as course title

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\HRule \\[0.8cm]
{ \huge \bfseries MD$\mathbf{^2}$ -- Handbook}\\[0.4cm] % Title of your document
\HRule \\[3cm]
 
%----------------------------------------------------------------------------------------
%	AUTHOR SECTION
%----------------------------------------------------------------------------------------

\begin{minipage}[t]{0.4\textwidth}
\begin{flushleft} \large
\emph{Group Members:}\\
Jan Christoph Dageförde\\
Julia Dittmer\\
Andreas Fuchs\\
Carolin Gülpen\\
Holger Koelmann\\
Malte Möser\\
Tobias Reischmann
\end{flushleft}
\end{minipage}
~
\begin{minipage}[t]{0.5\textwidth}
\begin{flushright}\large

\emph{Supervisors:}\\
Prof. Dr. Herbert Kuchen\\
Jan Ernsting\\\bigskip

Group for Practical Computer Science \\
University of Münster\\
\end{flushright}
\end{minipage}\\[3cm]

% If you don't want a supervisor, uncomment the two lines below and remove the section above
%\Large \emph{Author:}\\
%John \textsc{Smith}\\[3cm] % Your name

%----------------------------------------------------------------------------------------
%	DATE SECTION
%----------------------------------------------------------------------------------------

{\large \today}\\[3cm] % Date, change the \today to a set date if you want to be precise

%----------------------------------------------------------------------------------------
%	LOGO SECTION
%----------------------------------------------------------------------------------------

%\includegraphics{Logo}\\[1cm] % Include a department/university logo - this will require the graphicx package
 
%----------------------------------------------------------------------------------------

\vfill % Fill the rest of the page with whitespace

\end{titlepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% table of contents

\thispagestyle{empty}
%\bgroup
%\begin{spacing}{0.87}  % Damit alles auf eine Seite passt
\tableofcontents
%\end{spacing}
%\egroup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% the document itself


\clearpage
\setcounter{page}{1}
% Provides commands for chapter structure having no numbering on highest layer
\newcommand*\theaddchap[1]{
	\addchap{#1}
	\setcounter{table}{0}
	\setcounter{figure}{0}
	\setcounter{section}{0}
}
\renewcommand*\thesection{\arabic{section}}
\renewcommand*\thetable{\arabic{table}}
\renewcommand*\thefigure{\arabic{figure}}
\setcounter{secnumdepth}{5}

\theaddchap{Introduction}
\todo{Searchtags for TODOs: @TOBI, @JAN, @CARO, @MALTE, @JULE, @ANDI, @HOLGER; \newline \newline FOR EVERYONE: @ALL}
\input{Introduction/00-Introduction}

\theaddchap{Modeler's Handbook}
\label{cha:modelersHandbook}

\input{ModelersHandbook/00-Introduction}

\section{Installation}
\label{sec: Installation}
\input{ModelersHandbook/10-Installation}

\section{Getting Started}
\label{sec: Getting Started}
\input{ModelersHandbook/20-GettingStarted}

\section{Development and Deployment of Multiple Apps}
\label{sec:developAndDeployMultiApps}
\input{ModelersHandbook/30-MultipleApps}

\section{Additional Features}
\label{sec:Additional Features}
\input{ModelersHandbook/40-AdditionalFeatures}


\theaddchap{Developer's Handbook}
\todo{@ALL what about the preprocessor [it is after all the basis for all the generators?]}
\input{DevelopersHandbook/00-Introduction}

\section{Installation}
\input{DevelopersHandbook/10-Installation}

\section{DSL Semantics}
\input{DevelopersHandbook/20-DSLSemantics}

\section{map.apps Implementation}
\input{DevelopersHandbook/30-GeneratedCode}

\section{Backend}\label{sec:backend}
\input{DevelopersHandbook/41-Backend}

\section{map.apps Generator}
\input{DevelopersHandbook/40-Generator}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% appendix

\clearpage
\appendix
\pagenumbering{Roman}		%% roman page numbers for the appendix
%\input{90-Appendix}

\chapter{Sample Workflow}
\input{Appendix/A1-SampleWorkflow}

\chapter{Known Issues and Suggestions for Future Development}
\input{Appendix/A2-Suggestions}

\chapter{Further Improvements to your Development Environment}
\input{Appendix/A3-DevelopmentEnvironment}

\chapter{Backend Connection Specification} \label{chp:appendix:backend-ws-spec}
\input{Appendix/A4-BackendConnectionSpec}


%% Stop section "numbering" after appendix

\setcounter{secnumdepth}{0}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% lists of figures and tables

%\clearpage
%\listoffigures
%\listoftables

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Define Abbreviations
%\clearpage
%\section{List of Acronyms}
%\begin{acronym}
%\acro{AACS}{Advanced Access Content System}
%\acro{XOR}{exclusive or}
%\end{acronym}

%\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% bibliography (if needed)

%\nocite{*}
%\bibliographystyle{plain}
%\bibliography{lit}

%\printbibliography[heading=bibintoc] % biblatex
\end{document}